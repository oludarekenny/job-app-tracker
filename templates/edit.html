<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit Application</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h2>Edit Job Application</h2>

  <form action="{{ url_for('edit_application', app_id=app.id) }}" method="POST" enctype="multipart/form-data">
    
    <label>Date Applied:</label>
    <input type="date" name="date_applied" value="{{ app.date_applied | default('') }}">

    <label>Company Name:</label>
    <input type="text" name="company" value="{{ app.company_name | default('') }}">

    <label>Role:</label>
    <input type="text" name="role" value="{{ app.role | default('') }}">

    <label>Application Source:</label>
    <input type="text" name="source" value="{{ app.application_source | default('') }}">

    <!-- Existing CV -->
    {% if app.cv_filename %}
      <p>Current CV: <a href="{{ url_for('static', filename='../uploads/' + app.cv_filename) }}" target="_blank">{{ app.cv_filename }}</a></p>
    {% else %}
      <p>No CV uploaded</p>
    {% endif %}
    <input type="hidden" name="existing_cv" value="{{ app.cv_filename | default('') }}">

    <label>Upload New CV (optional):</label>
    <input type="file" name="cv" accept=".pdf,.docx">

    <label>Stage 1:</label>
    <input type="text" name="stage1" value="{{ app.stage1 | default('') }}">

    <label>Stage 2:</label>
    <input type="text" name="stage2" value="{{ app.stage2 | default('') }}">

    <label>Stage 3:</label>
    <input type="text" name="stage3" value="{{ app.stage3 | default('') }}">

    <label>Status:</label>
                <select name="status" required>
                <option value="">-- Select Status --</option>
                <option value="Accepted" {% if app.status == 'Accepted' %}selected{% endif %}>Accepted</option>
                <option value="Rejected" {% if app.status == 'Rejected' %}selected{% endif %}>Rejected</option>
                </select>


    <label>Comments:</label>
    <textarea name="comments">{{ app.comments | default('') }}</textarea>

    <button type="submit">Update Application</button>
  </form>

  <a href="{{ url_for('view_applications') }}">Back to All Applications</a>
</body>
</html>
